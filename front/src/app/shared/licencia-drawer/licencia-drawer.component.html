<nz-drawer [nzClosable]="false" [(nzVisible)]="visible" [nzPlacement]="placement" [nzWidth]="640" [nzTitle]="tituloDrawer"
  (nzOnClose)="visible.set(false)">
  <ng-container *nzDrawerContent>
    @if (cambios()|async) {}
    <form nz-form ngForm>
      <nz-form-item style="display:none">
        <nz-form-label [nzSpan]="3">SucursalId</nz-form-label>
        <nz-form-control [nzSpan]="19">
          <input nz-input name="SucursalId" ngModel />
        </nz-form-control>
      </nz-form-item>
      <nz-form-item style="display:none">
        <nz-form-label [nzSpan]="3">PersonalLicenciaId</nz-form-label>
        <nz-form-control [nzSpan]="19">
          <input nz-input name="PersonalLicenciaId" ngModel />
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label [nzSpan]="5">Persona</nz-form-label>
        <nz-form-control>
          <nz-input-group style="width: 100%">
            <app-personal-search name="PersonalId" ngModel/>
          </nz-input-group>
        </nz-form-control>
      </nz-form-item>
  
      <nz-form-item>
        <nz-form-label [nzSpan]="5">Desde: </nz-form-label>
        <nz-form-control [nzXs]="24">
          <nz-date-picker name="PersonalLicenciaDesde" ngModel></nz-date-picker>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSpan]="5">Hasta </nz-form-label>
        <nz-form-control>
          <nz-date-picker name="PersonalLicenciaHasta" ngModel></nz-date-picker>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSpan]="5">Tipo Inasistencia </nz-form-label>
        <nz-form-control>
          <app-inasistencia-search name="TipoInasistenciaId" ngModel></app-inasistencia-search>
        </nz-form-control>
      </nz-form-item>
      @if (!IsEdit()) {
      <nz-form-item>
        <nz-form-label [nzSpan]="5">Sucursal</nz-form-label>
        <nz-form-control>
          <nz-select nzSpan="19" name="SucursalId" [(ngModel)]="selectedSucursalId" [nzDropdownMatchSelectWidth]="false"
            (ngModelChange)="selectedValueChange($event)" nzAllowClear nzPlaceHolder="Sucursal"
            nzShowSearch>
            <ng-container *ngFor="let option of $optionsSucursales | async">
              <nz-option [nzValue]="option.SucursalId" [nzLabel]="option.SucursalDescripcion"></nz-option>
            </ng-container>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
      }
      <nz-form-item>
        <nz-form-label [nzSpan]="5">Categoría </nz-form-label>
        <nz-form-control>
          
          <app-categoria-persona [IsEdit]="IsEdit()" [sucursalid]="ngForm().value?.SucursalId" [NombreApellidoId]="ngForm().value?.PersonalId"
            [selectedPeriod]="selectedPeriod()" name="categoria" ngModel></app-categoria-persona> 
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSpan]="5">Se paga</nz-form-label>
        <nz-form-control>
          <nz-select nzShowSearch nzAllowClear nzPlaceHolder="" name="PersonalLicenciaSePaga" ngModel [nzDropdownMatchSelectWidth]="false">
            <nz-option nzLabel="Si" nzValue="S"></nz-option>
            <nz-option nzLabel="No" nzValue="N"></nz-option>
            <nz-option nzLabel="Indeterminado" nzValue=""></nz-option>
          </nz-select>          
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSpan]="5">Horas Mensuales </nz-form-label>
        <nz-form-control>
          <input nz-input name="PersonalLicenciaHorasMensuales" ngModel />
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSpan]="5">Observación </nz-form-label>
        <nz-form-control>
          <input nz-input name="PersonalLicenciaObservacion" ngModel />
        </nz-form-control>
      </nz-form-item>

      -Carga de Documentos.

      @if (IsEdit()) {
        <button nz-button nzType="primary" (click)="save(true)">Guardar</button>
      }@else{
        <button nz-button nzType="primary" (click)="save(false)">Guardar</button>
      }
     
      <button nz-button nzType="primary" (click)="deletelicencia()" nzDanger>Eliminar</button>

    </form>
    <p>Debug Valores: {{ngForm().value | json }}</p>
  </ng-container>
</nz-drawer>