<form [formGroup]="ngForm">
  <nz-spin [nzSpinning]="(uploading$ |async)!.loading">

    <nz-form-item class="nfi-margin-bottom">
      <nz-form-label class="inputText">Archivo Importe Venta</nz-form-label>
      <app-file-upload formControlName="files" [idForSearh]="0" [cantMaxFiles]="1" [textForSearch]="'IMPVENV'"
      [columnForSearch]="'DocumentoId'" [tableForSearch]="'documento'" [showTipoDocs]="false"></app-file-upload>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label class="inputText">Importaciones anteriores</nz-form-label>
      <nz-form-control>
        <!--{{ngForm.value | json}}-->
        @for (movimiento of $importacionesAnteriores | async; track movimiento) {
          <div class="containerAnterioresImporteVentaVigilancia" nz-tooltip nzTooltipTitle={{1}}>
            <ng-container>
              <a app-down-file httpUrl="/api/importe-venta-vigilancia/download/{{movimiento.DocumentoId}}">
                <span nz-icon nzType="download"></span></a>
              </ng-container>
              <span> ID: {{movimiento.DocumentoId}} - Fecha: {{movimiento.DocumentoMes}}/{{movimiento.DocumentoAnio}}
              </span>
            </div>
          }
        </nz-form-control>
      </nz-form-item>
    </nz-spin>
  </form>

  @if(columns$ | async; as columnas) {

    <div class="gridContainer container-fluid">
      <angular-slickgrid gridId="gridImporteVenta" class="" [columns]="columnas | colsFilter"
        [options]="gridOptions" [dataset]="gridDataImport()"
      (onAngularGridCreated)="angularGridReady($event)"></angular-slickgrid>
    </div>
  }
