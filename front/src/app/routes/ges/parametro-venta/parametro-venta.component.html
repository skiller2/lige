<nz-card class="small-margin">

  <div nz-row style="align-items: center; display: flex; justify-content: space-between;">

    <div nz-row>
      <nz-form-label [nzSpan]="10">Periodo</nz-form-label>
      <nz-form-control [nzSpan]="14">
        <nz-date-picker nzMode="month" [ngModel]="periodo()" (ngModelChange)="periodo.set($event)" nzFormat="MM/yyyy"
          style="width: 100%;" />
      </nz-form-control>

    </div>

    <div nz-col style="display: flex;flex-direction: row-reverse;">
      <nz-button-group nz-button nzButtonGroup>
        <a [routerLink]="['/', 'ges', 'parametros-venta','alta']" nz-tooltip
          nzTooltipTitle="{{ 'app.icon.add' | i18n }}">
          <button nz-button nzType="default" (click)="onAddClick()"><span nz-icon nzType="plus" nzTheme="outline"></span></button>
        </a>
        <a [routerLink]="['/', 'ges', 'parametros-venta','modificar']" nz-tooltip
          nzTooltipTitle="{{ 'app.icon.edit' | i18n }}">
          <button nz-button nzType="default" [disabled]="!(codobj() && PeriodoDesdeAplica())" (click)="isEdit.set(true)"><span nz-icon
              nzType="edit" nzTheme="outline"></span></button>
        </a>

       @if(PeriodoDesdeAplica() && parametrosSeleccionadas() && parametrosSeleccionadas().length > 0){
          <a nz-tooltip nzTooltipTitle="{{ 'app.icon.autorizar' | i18n }}">
            <button nz-button nzType="default"
              (click)="autorizarParametroVenta()">
              <span nz-icon nzType="check" nzTheme="outline"></span>
            </button>
          </a>
          <a nz-tooltip nzTooltipTitle="{{ 'app.icon.rechazar' | i18n }}">
            <button nz-button nzType="default"
              (click)="rechazarParametroVenta()">
              <span nz-icon nzType="close" nzTheme="outline"></span>
            </button>
          </a>
        }

      <button nz-button nzType="default" (click)="refreshGridNow()"><span nz-icon
          nzType="reload" nzTheme="outline" nz-tooltip
          nzTooltipTitle="{{ 'app.icon.reload' | i18n }}"></span></button>



      </nz-button-group>
    </div>
  </div>
  <div nz-row class="contentStyle">
    <div nz-col nzSpan="13" class="listStyle">
      <ul nz-menu nzMode="horizontal" style="display: flex;">
        <li nz-menu-item nzMatchRouter>
          <span nz-icon nzType=""></span>
          <a [routerLink]="['/', 'ges', 'parametros-venta', 'listado']">{{ 'app.listado' | i18n }} </a>
        </li>
        <li nz-menu-item nzMatchRouter>
          <span nz-icon nzType=""></span>
          <a [routerLink]="['/', 'ges', 'parametros-venta', 'detalle']"
            (click)="viewListado.set(false)">{{ 'app.detail' | i18n }} </a>
        </li>
      </ul>
      @if(!childIsPristine()){
      <li nz-menu-item nzMatchRouter>
        <span nz-icon nzType=""></span>
        <a [routerLink]="['/', 'ges', 'parametros-venta', 'alta']" (click)="viewListado.set(false)">{{ 'app.alta' |
          i18n }}</a>
      </li>
      }
    </div>

  </div>
  <nz-tabs nzCentered nzLinkRouter class="hide-ant-tabs-nav" (nzSelectChange)="onTabsetChange($event)">
    <nz-tab></nz-tab>
    <nz-tab>
      <a nz-tab-link routerLink="/ges/parametros-venta/listado">{{ 'app.icon.objectives' | i18n }} </a>
      <ng-template nz-tab>
        <app-table-parametro-venta #tableParametroVenta [periodo]="periodo()" [(codobj)]="codobj" [(objetivoId)]="objetivoId"
          [(PeriodoDesdeAplica)]="PeriodoDesdeAplica"
          [refreshCondVenta]="refreshCondVenta()"
          [(parametrosSeleccionadas)]="parametrosSeleccionadas"></app-table-parametro-venta>
      </ng-template>
    </nz-tab>

    <nz-tab>
      <a nz-tab-link routerLink="/ges/parametros-venta/modificar">{{ 'app.icon.edit' | i18n }}</a>
      <ng-template nz-tab>
        <app-parametro-venta-form #parametroVentaFormEditar
          [(objetivoId)]="objetivoId" [(refreshCondVenta)]="refreshCondVenta"
          [PeriodoDesdeAplica]="PeriodoDesdeAplica()" [periodo]="periodo()" [(isEdit)]="isEdit"></app-parametro-venta-form>
      </ng-template>
    </nz-tab>

    <nz-tab>
      <a nz-tab-link routerLink="/ges/parametros-venta/detalle">{{ 'app.icon.detail' | i18n }}</a>
      <ng-template nz-tab>
        <app-parametro-venta-form #parametroVentaFormDetalle
          [(objetivoId)]="objetivoId" [(refreshCondVenta)]="refreshCondVenta"
          [PeriodoDesdeAplica]="PeriodoDesdeAplica()" [periodo]="periodo()" [(isEdit)]="isEdit"></app-parametro-venta-form>
      </ng-template>
    </nz-tab>

    <nz-tab>
      <a nz-tab-link routerLink="/ges/parametros-venta/alta">{{ 'app.alta' | i18n }}</a>
      <ng-template nz-tab>
        <app-parametro-venta-form #parametroVentaFormAlta
          [(objetivoId)]="objetivoId" [(refreshCondVenta)]="refreshCondVenta"
          [PeriodoDesdeAplica]="PeriodoDesdeAplica()" [periodo]="periodo()" [(isEdit)]="isEdit"></app-parametro-venta-form>
      </ng-template>
    </nz-tab>

  </nz-tabs>

</nz-card>