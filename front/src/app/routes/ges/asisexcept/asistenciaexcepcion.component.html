<ng-template #phActionTpl>
  <nz-button-group>
    <button nz-button nzType="primary" disabled>L</button>
    <button nz-button nzType="default" disabled>M</button>
    <button nz-button nzType="default">M</button>
    <button nz-button nzType="dashed" disabled>R</button>
  </nz-button-group>
</ng-template>

<page-header [action]="phActionTpl"></page-header>

<nz-card class="small-margin">


  <form nz-form>

    <nz-form-item>
      <nz-form-label [nzSpan]="5">Sucursal</nz-form-label>
      <nz-form-control>
        <nz-select nzSpan="19" [(ngModel)]="selectedSucursalId" [ngModelOptions]="{standalone: true} "
          (ngModelChange)="selectedValueChange($event, Busqueda.Sucursal)" nzAllowClear nzPlaceHolder="Sucursal"
          nzShowSearch>
          <ng-container *ngFor="let option of $optionsSucursales | async">
            <nz-option [nzValue]="option.SucursalId" [nzLabel]="option.SucursalDescripcion"></nz-option>
          </ng-container>
        </nz-select>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label [nzSpan]="5">Objetivo</nz-form-label>
      <nz-form-control>
        <nz-select [(ngModel)]="selectedObjetivoId" [ngModelOptions]="{standalone: true} "
          (ngModelChange)="selectedValueChange($event, Busqueda.Objetivo)" nzAllowClear
          nzPlaceHolder="Descripcion, CÃ³digo" nzShowSearch nzServerSearch (nzOnSearch)="searchObjetivo($event)">
          <ng-container *ngFor="let option of $optionsObjetivos | async">
            <nz-option [nzValue]="option.ObjetivoId"
              nzLabel="{{option.ClienteId}}/{{option.ClienteElementoDependienteId | nzSafeNull: '0'}} {{option.ObjetivoDescripcion}}"></nz-option>
          </ng-container>
        </nz-select>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label [nzSpan]="5">Persona</nz-form-label>
      <nz-form-control>
        <nz-select [(ngModel)]="selectedPersonalId" [ngModelOptions]="{standalone: true}"
          (ngModelChange)="selectedValueChange($event, Busqueda.Personal)" nzAllowClear
          nzPlaceHolder="Apellido, Nombre, CUIT" nzShowSearch nzServerSearch (nzOnSearch)="searchPersonal($event)">
          <ng-container *ngFor="let option of $optionsPersonal | async">
            <nz-option [nzValue]="option.PersonalId" [nzLabel]="option.fullName"></nz-option>
          </ng-container>
        </nz-select>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label [nzSpan]="5">Metodologia</nz-form-label>
      <nz-form-control>
        <nz-select [(ngModel)]="selectedMetodologiaId" [ngModelOptions]="{standalone: true} " nzAllowClear
          nzPlaceHolder="Metodologia" nzShowSearch>
          <ng-container *ngFor="let option of $optionsMetodologia | async">
            <nz-option [nzValue]="option.id" [nzLabel]="option.descripcion"></nz-option>
          </ng-container>
        </nz-select>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-container [ngSwitch]="selectedMetodologiaId">
        <ng-container *ngSwitchCase="'S'">
          <nz-form-label [nzSpan]="5">Suma</nz-form-label>
          <nz-form-control>
            <nz-input-number [nzStep]="0"></nz-input-number>
          </nz-form-control>
        </ng-container>
        <ng-container *ngSwitchCase="'E'">
          <nz-form-label [nzSpan]="5">Categoria</nz-form-label>
          <nz-form-control>
            <nz-select [(ngModel)]="selectedCategoriaId" [ngModelOptions]="{standalone: true} " nzAllowClear
              nzPlaceHolder="Categoria" nzShowSearch>
              <ng-container *ngFor="let option of $optionsCategoria | async">
                <nz-option [nzValue]="option.CategoriaPersonalId"
                  [nzLabel]="option.CategoriaPersonalDescripcion"></nz-option>
              </ng-container>
            </nz-select>
          </nz-form-control>
        </ng-container>
        <ng-container *ngSwitchCase="'A'">
          <nz-form-label [nzSpan]="5">Adicional</nz-form-label>
          <nz-form-control>
            <nz-input-number [nzStep]="1"></nz-input-number>
          </nz-form-control>

        </ng-container>
        <ng-container *ngSwitchCase="'H'">
          <nz-form-label [nzSpan]="5">Adicional</nz-form-label>
          <nz-form-control>
            <nz-input-number [nzStep]="1"></nz-input-number>
          </nz-form-control>
        </ng-container>
      </nz-container>
    </nz-form-item>


  </form>

</nz-card>

<ng-template #optionsLoading>
  <nz-option nzDisabled nzCustomContent>
    <span nz-icon nzType="loading" class="loading-icon"></span>
    Loading Data...
  </nz-option>
</ng-template>