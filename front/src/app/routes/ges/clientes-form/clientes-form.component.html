
<form [formGroup]="formCli">
    <br>
    <nz-form-item class="marginElement">
      <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">CUIT</nz-form-label>
      <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="6">
        <input nz-input placeholder="" formControlName="ClienteFacturacionCUIT" type="number" />
      </nz-form-control>

      <div>
        {{this.edit()}}
      </div>

      <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="8" [nzLg]="5">Condición Ante IVA</nz-form-label>
      <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="6">
        <!-- <input nz-input placeholder="" formControlName="CondicionAnteIVAId" type="number" /> -->
        <nz-select formControlName="ClienteCondicionAnteIVAId" nzPlaceHolder="Condición Ante IVA" nzAllowClear [nzDropdownMatchSelectWidth]="false" style="width: 100%" >
          <ng-container *ngFor="let option of $optionsCondicionAnteIva | async " >
            <nz-option [nzValue]="option.CondicionAnteIVAId" [nzLabel]="option.CondicionAnteIVADescripcion" ></nz-option>
          </ng-container>
        </nz-select>
      </nz-form-control>
    </nz-form-item>
    
    <nz-form-item class="marginElement">
        <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">Razón Social</nz-form-label>
        <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="6">
          <input nz-input placeholder="" formControlName="ClienteDenominacion" type="string" />
        </nz-form-control>
  
        <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="8" [nzLg]="5">  Nombre Fantasía</nz-form-label>
        <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="6">
          <input nz-input placeholder="" formControlName="CLienteNombreFantasia" type="text" />
        </nz-form-control>
    </nz-form-item>

    <nz-form-item class="marginElement">
        <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">Fecha Inicial</nz-form-label>
        <nz-form-control [nzSm]="24" [nzMd]="20" [nzLg]="17">
          <nz-date-picker
            [nzShowTime]="{ nzFormat: 'HH:mm' }"
            nzFormat="yyyy-MM-dd HH:mm"
            formControlName="ClienteFechaAlta"
            (ngModelChange)="onChangePeriodo($event)"
          ></nz-date-picker>
        </nz-form-control>
    </nz-form-item>

    <div class="input-container">
        <div class="input-label">Domicilio</div>
    </div>  
    <nz-form-item class="marginElement">
        <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">Dirección Calle</nz-form-label>
        <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="12">
          <input nz-input placeholder="" formControlName="ClienteDomicilioDomCalle" type="text" />
        </nz-form-control>

      <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="1">Nro</nz-form-label>
      <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="4">
        <input nz-input placeholder="" formControlName="ClienteDomicilioDomNro" type="text" />
      </nz-form-control>
    </nz-form-item>

    <nz-form-item class="marginElement">
        <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">Referencia</nz-form-label>
        <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="6">
          <input nz-input placeholder="" formControlName="referencia" type="text" />
        </nz-form-control>
  
        <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="8" [nzLg]="5">Cod Postal </nz-form-label>
        <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="6">
          <input nz-input placeholder="" formControlName="ClienteDomicilioCodigoPostal" type="text" />
        </nz-form-control>
    </nz-form-item>

    <nz-form-item class="marginElement">
        <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">País</nz-form-label>
        <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="6">
          <input nz-input placeholder="" type="text" />
        </nz-form-control>
  
        <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="8" [nzLg]="5">Provincia</nz-form-label>
        <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="6">
          <!-- <input nz-input placeholder="" formControlName="domicilioprovincia" type="number" /> -->
          <nz-select formControlName="ClienteDomicilioProvinciaId" nzPlaceHolder="Provincia" nzAllowClear [nzDropdownMatchSelectWidth]="false" style="width: 100%" >
            <ng-container *ngFor="let option of $optionsProvincia | async " >
              <nz-option [nzValue]="option.ProvinciaId" [nzLabel]="option.ProvinciaDescripcion" ></nz-option>
            </ng-container>
          </nz-select>
        </nz-form-control>
    </nz-form-item>

    <nz-form-item class="marginElement">
        <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">Localidad</nz-form-label>
        <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="6">
          <!-- <input nz-input placeholder="" formControlName="domiciliolocalidad" type="number" /> -->
          <nz-select formControlName="ClienteDomicilioLocalidadId" nzPlaceHolder="Localidad" nzAllowClear [nzDropdownMatchSelectWidth]="false" style="width: 100%" >
            <ng-container *ngFor="let option of $optionsLocalidad | async " >
              <nz-option [nzValue]="option.LocalidadId" [nzLabel]="option.localidadDescripcion" ></nz-option>
            </ng-container>
          </nz-select>
        </nz-form-control>
  
        <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="8" [nzLg]="5">Barrio</nz-form-label>
        <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="6">
          <!-- <input nz-input placeholder="" formControlName="domiciliobarrio" type="number" /> -->
          <nz-select formControlName="ClienteDomicilioBarrioId" nzPlaceHolder="Barrio" nzAllowClear [nzDropdownMatchSelectWidth]="false" style="width: 100%" >
            <ng-container *ngFor="let option of $optionsBarrio | async " >
              <nz-option [nzValue]="option.BarrioId" [nzLabel]="option.BarrioDescripcion" ></nz-option>
            </ng-container>
          </nz-select>
        </nz-form-control>
    </nz-form-item>

    <div class="input-container">
     <div class="input-label">Cliente Contacto</div>
    </div>   
    <div formArrayName="infoClienteContacto">
    <nz-form-item class="marginElement" *ngFor="let control of infoClienteContacto().controls; let i = index" [formGroupName]="i">

        <!-- <nz-form-label  [nzXs]="24" [nzSm]="24" [nzMd]="2"> Persona </nz-form-label>
        <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="5">
        <nz-input-group style="width: 100%" [nzAddOnAfter]="personalButton" nzSearch>
          <app-personal-search formControlName="personalId" [disabled]="!edit()"/>
        </nz-input-group>
        <ng-template #personalButton>
          <button nz-button nzType="dashed" nzSearch (click)="openDrawer(i)">
            <span nz-icon nzType="user" ></span>
          </button>
        </ng-template>
      </nz-form-control> -->

      <nz-form-label  [nzXs]="24" [nzSm]="24" [nzMd]="2"> Nombre </nz-form-label>
      <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="3" [nzLg]="2">
        <nz-input-group style="width: 100%" nzSearch>
          <input nz-input placeholder="" formControlName="nombre" type="string" />
        </nz-input-group>
      </nz-form-control>

      <nz-form-label  [nzXs]="24" [nzSm]="24" [nzMd]="2"> Apellido </nz-form-label>
      <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="3" [nzLg]="2">
        <nz-input-group style="width: 100%" nzSearch>
          <input nz-input placeholder="" formControlName="ClienteContactoApellido" type="string" />
        </nz-input-group>
      </nz-form-control>
        
      <nz-form-label  [nzXs]="24" [nzSm]="24" [nzMd]="2"> Area </nz-form-label>
      <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="3" [nzLg]="3">
        <nz-input-group style="width: 100%" nzSearch>
          <input nz-input placeholder="" formControlName="area" type="string" />
        </nz-input-group>
      </nz-form-control>
      <nz-form-label  [nzXs]="24" [nzSm]="24" [nzMd]="2"> Telefono </nz-form-label>
      <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="3" [nzLg]="2">
        <nz-input-group style="width: 100%" nzSearch>
            <input nz-input placeholder="" formControlName="telefono" type="string" />
        </nz-input-group>
      </nz-form-control>

      <nz-form-label  [nzXs]="24" [nzSm]="24" [nzMd]="2"> Correo </nz-form-label>
      <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="3" [nzLg]="5">
        <nz-input-group style="width: 100%" [nzAddOnAfter]="controlClienteButton" nzSearch>
            <input nz-input placeholder="" formControlName="correo" type="string" />
          </nz-input-group>
          <ng-template #controlClienteButton >
            <button nz-button *ngIf="infoClienteContacto().controls.length == i+1" nzType="primary" class="add-button" (click)="addClienteContacto($event)">
              <span nz-icon nzType="plus"></span>
            </button>
            <button nz-button nzType="default" (click)="removeClienteContacto(i, $event)">
              <span nz-icon nzType="delete" nzTheme="outline" ></span>
            </button>
          </ng-template>
      </nz-form-control> 
    
    </nz-form-item>
</div>

    <div class="input-container">
        <div class="input-label">Administrador</div>
    </div>  
    <nz-form-item class="marginElement">
        <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">Administrador</nz-form-label>
        <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="6">
          <input nz-input placeholder="" formControlName="AdministradorApellidoNombre" type="text" />
        </nz-form-control>
    </nz-form-item>
    <br>
    <nz-form-item>
      <nz-form-control style="display: flex; justify-content: center; align-items: center;">    
        <button nzType="primary" nz-button *ngIf="edit()"  (click)="save()" [nzLoading]="isLoading()" [disabled]="formCli.pristine" >
          Guardar Cambios
        </button>
      </nz-form-control>
    </nz-form-item>
    <br>
</form>
<!-- <app-detalle-persona [anio]="periodo().year" [mes]="periodo().month" [SucursalId]="0"
  [PersonalId]="personalId()" [visible]="visibleDrawer" (onClose)="closeDrawer()"></app-detalle-persona> -->