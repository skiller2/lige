<form [formGroup]="formCli">
  <br>

  <nz-form-item class="marginElement">
    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">Código</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="3">
      <input nz-input placeholder="" formControlName="codigo" type="number" />
    </nz-form-control>
  </nz-form-item>

  <nz-form-item class="marginElement">
    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">CUIT</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="6">
      <input nz-input placeholder="" formControlName="ClienteFacturacionCUIT" type="number" />
    </nz-form-control>

    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="8" [nzLg]="5">Condición Ante IVA</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="6">
      <!-- <input nz-input placeholder="" formControlName="CondicionAnteIVAId" type="number" /> -->
      <nz-select formControlName="CondicionAnteIVAId" nzPlaceHolder="Condición Ante IVA" nzAllowClear
        [nzDropdownMatchSelectWidth]="false" style="width: 100%" nzShowSearch>
        <ng-container *ngFor="let option of optionsCondicionAnteIva">
          <nz-option [nzValue]="option.CondicionAnteIVAId" [nzLabel]="option.CondicionAnteIVADescripcion"></nz-option>
        </ng-container>
      </nz-select>
    </nz-form-control>
  </nz-form-item>

  <nz-form-item class="marginElement">
    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">Razón Social</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="6">
      <input nz-input placeholder="" formControlName="ClienteDenominacion" type="string" />
    </nz-form-control>

    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="8" [nzLg]="5"> Nombre Fantasía</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="6">
      <input nz-input placeholder="" formControlName="ClienteNombreFantasia" type="string" />
    </nz-form-control>
  </nz-form-item>

  <nz-form-item class="marginElement">
    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">Fecha Inicial</nz-form-label>
    <nz-form-control [nzSm]="24" [nzMd]="20" [nzLg]="8">
      <nz-date-picker nzFormat="yyyy-MM-dd" formControlName="ClienteFechaAlta"
        (ngModelChange)="onChangePeriodo($event)"></nz-date-picker>
    </nz-form-control>

    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">Termino Pago</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="3">
      <input nz-input placeholder="" formControlName="ClienteTerminoPago" type="number" />
    </nz-form-control>
  </nz-form-item>

  <div class="input-container1">
    <div class="input-label">Domicilio</div>
  </div>

  <div formArrayName="infoDomicilio">
    <div *ngFor="let control of infoDomicilio().controls; let i = index" [formGroupName]="i"
      [ngClass]="{'even-background': i % 2 !== 0}">
      <nz-form-item class="marginElement">
        <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">Dirección Calle</nz-form-label>
        <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="12">
          <input nz-input placeholder="" formControlName="ClienteDomicilioDomCalle" type="text" />
        </nz-form-control>

        <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="1">Nro</nz-form-label>
        <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="4">
          <input nz-input placeholder="" formControlName="ClienteDomicilioDomNro" type="text" />
        </nz-form-control>
      </nz-form-item>

      <nz-form-item class="marginElement">
        <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">Complemento</nz-form-label>
        <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="12">
          <input nz-input placeholder="" formControlName="ClienteDomicilioDomLugar" type="text" />
        </nz-form-control>


      </nz-form-item>

      <nz-form-item class="marginElement">
        <!-- <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">País</nz-form-label>
        <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="6">
          <input nz-input placeholder="" type="text" />
        </nz-form-control> -->

        <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">Cod Postal </nz-form-label>
        <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="6">
          <input nz-input placeholder="" formControlName="ClienteDomicilioCodigoPostal" type="text" />
        </nz-form-control>

        <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="8" [nzLg]="5">Provincia</nz-form-label>
        <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="6">
          <!-- <input nz-input placeholder="" formControlName="domicilioprovincia" type="number" /> -->
          <nz-select formControlName="ClienteDomicilioProvinciaId" nzPlaceHolder="Provincia" nzAllowClear
            [nzDropdownMatchSelectWidth]="false" style="width: 100%" nzShowSearch
            (nzBlur)="control.patchValue({ClienteDomicilioLocalidadId:null,ClienteDomicilioBarrioId:null})">
            <ng-container *ngFor="let option of optionsProvincia">
              <nz-option [nzValue]="option.ProvinciaId" [nzLabel]="option.ProvinciaDescripcion"></nz-option>
            </ng-container>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item class="marginElement">
        <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">Localidad </nz-form-label>
        <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="6">
          <!-- <input nz-input placeholder="" formControlName="domiciliolocalidad" type="number" /> -->
          <nz-select formControlName="ClienteDomicilioLocalidadId" nzPlaceHolder="Localidad" nzAllowClear
            [nzDropdownMatchSelectWidth]="false" style="width: 100%" nzShowSearch
            (nzBlur)="control.patchValue({ClienteDomicilioBarrioId:null})">
            <ng-container *ngFor="let option of optionsLocalidad">
              <nz-option *ngIf="option.ProvinciaId == control.value.ClienteDomicilioProvinciaId "
                [nzValue]="option.LocalidadId" [nzLabel]="option.localidadDescripcion"></nz-option>
            </ng-container>
          </nz-select>
        </nz-form-control>

        <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="5">Barrio</nz-form-label>

        <!-- Columna para el Select del Barrio -->

        <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="5">
          <nz-select formControlName="ClienteDomicilioBarrioId" nzPlaceHolder="Barrio" nzAllowClear
            [nzDropdownMatchSelectWidth]="false" style="width: 100%" nzShowSearch>
            <ng-container *ngFor="let option of optionsBarrio">
              <nz-option
                *ngIf="option.ProvinciaId == control.value.ClienteDomicilioProvinciaId && option.LocalidadId == control.value.ClienteDomicilioLocalidadId "
                [nzValue]="option.BarrioId" [nzLabel]="option.BarrioDescripcion"></nz-option>
            </ng-container>
          </nz-select>
        </nz-form-control>

        <!-- Columna para los botones -->
        <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="2" *ngIf="formCli.enabled">
          <div class="button-group" style="width: 100%">
            <button nz-button nzType="primary" class="add-button" (click)="addDomicilio($event)" nz-tooltip
              nzTooltipTitle="{{ 'app.icon.add' | i18n }}">
              <span nz-icon nzType="plus"></span>
            </button>
            <button *ngIf="infoDomicilio().length >= 2 " nz-button nzType="default" (click)="removeDomicilio(i, $event)"
              nz-tooltip nzTooltipTitle="{{ 'app.icon.delete' | i18n }}">
              <span nz-icon nzType="delete" nzTheme="outline"></span>
            </button>
          </div>
        </nz-form-control>

      </nz-form-item>
    </div>
  </div>

  <div class="input-container">
    <div class="input-label">Cliente Contacto</div>
  </div>
  <div formArrayName="infoClienteContacto">
    <div *ngFor="let control of infoClienteContacto().controls; let i = index"
      [formGroupName]="i" [ngClass]="{'even-background': i % 2 === 0}">

      <nz-form-item class="marginElement">
        <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="2" [nzLg]="3" [ngClass]="'btn-margintop'">Tipo de contacto</nz-form-label>
        <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="3" [nzLg]="5" [ngClass]="'btn-margintop'">
          <nz-select formControlName="ContactoTipoCod" nzPlaceHolder="Tipo" nzAllowClear
            [nzDropdownMatchSelectWidth]="false" style="width: 100%" nzShowSearch>
            <ng-container *ngFor="let option of $optionTipoContacto | async">
              <nz-option [nzValue]="option.value" [nzLabel]="option.label"></nz-option>
            </ng-container>
          </nz-select>
        </nz-form-control>
        <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="2" [nzLg]="4" [ngClass]="'btn-margintop'">Jurisdicción impositiva</nz-form-label>
        <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="3" [nzLg]="5" [ngClass]="'btn-margintop'">
          <nz-select formControlName="ContactoJurImpositiva" nzPlaceHolder="Tipo" nzAllowClear
            [nzDropdownMatchSelectWidth]="false" style="width: 100%" nzShowSearch>
            <ng-container *ngFor="let option of $optionJurImpositiva | async">
              <nz-option [nzValue]="option.value" [nzLabel]="option.label"></nz-option>
            </ng-container>
          </nz-select>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item class="marginElement">
      <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3"> Nombre </nz-form-label>
      <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="3" [nzLg]="5">
        <nz-input-group style="width: 100%" nzSearch>
          <input nz-input placeholder="" formControlName="nombre" type="string" />
        </nz-input-group>
      </nz-form-control>

      <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="2"> Apellido </nz-form-label>
      <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="3" [nzLg]="5">
        <nz-input-group style="width: 100%" nzSearch>
          <input nz-input placeholder="" formControlName="ContactoApellido" type="string" />
        </nz-input-group>
      </nz-form-control>

      <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="2"> Area </nz-form-label>
      <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="3" [nzLg]="5">
        <nz-input-group style="width: 100%" nzSearch>
          <input nz-input placeholder="" formControlName="area" type="string" />
        </nz-input-group>
      </nz-form-control>
      </nz-form-item>

      <nz-form-item class="marginElement">
      <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="2" [nzLg]="3" [ngClass]="'btn-margintop'">Tipo
        Telefono</nz-form-label>
      <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="3" [ngClass]="'btn-margintop'">
        <nz-select formControlName="TipoTelefonoId" nzPlaceHolder="Tipo Telefono" nzAllowClear
          [nzDropdownMatchSelectWidth]="false" style="width: 100%">
          <ng-container *ngFor="let option of tipoTelefono">
            <nz-option [nzValue]="option.TipoTelefonoId" [nzLabel]="option.TipoTelefonoDescripcion"></nz-option>
          </ng-container>
        </nz-select>
      </nz-form-control>

      <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="2" [ngClass]="'btn-margintop'"> Telefono </nz-form-label>
      <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="3" [nzLg]="6" [ngClass]="'btn-margintop'">
        <nz-input-group style="width: 100%" nzSearch>
          <input nz-input placeholder="" formControlName="telefono" type="string" />
        </nz-input-group>
      </nz-form-control>

      <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="2" [ngClass]="'btn-margintop'"> Correo </nz-form-label>
      <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="3" [nzLg]="6" [ngClass]="'btn-margintop'">
        <input nz-input placeholder="" formControlName="correo" type="string" />
      </nz-form-control>

      <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="2" *ngIf="formCli.enabled" class="button-group-direction">
        <div class="button-group" style="width: 100%">
          <button nz-button nzType="primary" class="add-button" *ngIf="infoClienteContacto().controls.length == i+1"
            nzType="primary" class="add-button" (click)="addClienteContacto($event)" nz-tooltip
            nzTooltipTitle="{{ 'app.icon.add' | i18n }}">
            <span nz-icon nzType="plus"></span>
          </button>
          <button *ngIf="infoClienteContacto().length >= 2" nz-button nzType="default"
            (click)="removeClienteContacto(i, $event)" nz-tooltip nzTooltipTitle="{{ 'app.icon.delete' | i18n }}">
            <span nz-icon nzType="delete" nzTheme="outline"></span>
          </button>

        </div>
      </nz-form-control>
      </nz-form-item>

    </div>
  </div>

  <div class="input-container1">
    <div class="input-label">Administrador</div>
  </div>
  <nz-form-item class="marginElement">
    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3"> Administrador</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="7">
      <app-administrador-search formControlName="AdministradorId" />
    </nz-form-control>

  </nz-form-item>
  <br>
  <div class="input-container1">
    <div class="input-label">Documentos</div>
  </div>

  <nz-form-item>

    <nz-form-control >
      <app-file-upload formControlName="files" [idForSearh]="formCli.value.id ?? 0" [textForSearch]="''"
        [columnForSearch]="'DocumentoClienteId'" [tableForSearch]="'documento'" [showTipoDocs]="true" ></app-file-upload> 
    </nz-form-control>

  </nz-form-item>

  <nz-form-item *ngIf="formCli.enabled">
    <nz-form-control style="display: flex; justify-content: center; align-items: center;">
      <button nzType="primary" nz-button (click)="save()" [nzLoading]="isLoading()" [disabled]="formCli.pristine">
        {{ 'app.btn.save' | i18n }}
      </button>
      <button nzType="primary" nz-button nzDanger nz-popconfirm
        nzPopconfirmTitle="Esta seguro que quiere eliminar este Cliente?" (nzOnConfirm)="deleteCliente()"
        nzPopconfirmPlacement="top" *ngIf="ClienteId()" [nzLoading]="isLoading()" [disabled]="!(formCli.pristine)">
        {{ 'app.btn.delete' | i18n }}
      </button>
    </nz-form-control>
  </nz-form-item>
  <br>
</form>