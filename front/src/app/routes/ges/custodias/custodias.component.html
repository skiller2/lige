<nz-card class="small-margin">
  <ul nz-menu nzMode="horizontal">
    <li nz-menu-item nzMatchRouter>
      <span nz-icon nzType=""></span>
      <a [routerLink]="['/', 'ges', 'cust','objetivos']" (click)="resetForm()">Objetivos</a>
    </li>
    <li nz-menu-item nzMatchRouter>
      <span nz-icon nzType=""></span>
      <a [routerLink]="['/', 'ges', 'cust','cargamanual']" (click)="resetObjCustodiaId()">Carga manual</a>
    </li>
  </ul>
  <nz-tabset nzCentered nzLinkRouter class="hide-ant-tabs-nav">

    <nz-tab>
      <a nz-tab-link routerLink="/ges/cust/objetivos">Objetivos</a>

      

      <ng-template nz-tab>
        
        <nz-form-control [nzSpan]="3">
          <button nz-button nzType="default" (click)="getObjCustodiaId()" *ngIf="editCustodiaId">
            <a [routerLink]="['/', 'ges', 'cust','cargamanual']" >
              <span nz-icon nzType="edit" nzTheme="outline"></span>
            </a>
          </button>
        </nz-form-control>
        

        <div class="gridListContainer container-fluid">
          <angular-slickgrid gridId="grid" [columnDefinitions]="columnas" [gridOptions]="gridOptions"
            [dataset]="gridDataInsert || []" (onAngularGridCreated)="angularGridReady($event)"
            (onSelectedRowsChanged)="handleSelectedRowsChanged()">
          </angular-slickgrid>
        </div>
      </ng-template>
    </nz-tab>

    <nz-tab>

      <a nz-tab-link routerLink="/ges/cust/cargamanual">Carga Manual</a>
        <form nz-form ngForm>

        <br>
        <nz-form-item class="marginElement">
          <nz-form-label [nzSpan]="3">Cliente</nz-form-label>
        
          <nz-form-control [nzSpan]="17">
            <nz-input-group style="width: 100%">
              <app-cliente-search name="clienteId" ngModel />
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>

        <nz-form-item class="marginElement">
          <nz-form-label [nzSpan]="3">Solicitado por</nz-form-label>
          <nz-form-control [nzSpan]="17">
            <nz-input-group style="width: 100%">
              <input nz-input placeholder="Kilometros" ngModel name="desc_requirente" type="number" />
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>

        <nz-form-item class="marginElement">
          <nz-form-label [nzSpan]="3">Descripcion</nz-form-label>
        
          <nz-form-control [nzSpan]="17">
            <nz-input-group style="width: 100%">
              <textarea rows="5" nz-input name="descripcion" ngModel></textarea>
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>
        
        <nz-form-item class="marginElement">
          <nz-form-label [nzSpan]="3">Fecha Inicial</nz-form-label>
        
          <nz-form-control [nzSpan]="17">
            <nz-input-group style="width: 100%">
              <nz-date-picker
                [nzShowTime]="{ nzFormat: 'HH:mm' }"
                ngModel
                name ="fechaInicio"
              ></nz-date-picker>
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>

        <nz-form-item class="marginElement">
          <nz-form-label [nzSpan]="3">Origen</nz-form-label>
        
          <nz-form-control [nzSpan]="17">
            <nz-input-group style="width: 100%">
              <input nz-input placeholder="Direccion" ngModel name="origen" type="text" />
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>

        <nz-form-item class="marginElement">
          <nz-form-label [nzSpan]="3">Fecha Final</nz-form-label>
        
          <nz-form-control [nzSpan]="17">
            <nz-input-group style="width: 100%">
              <nz-date-picker
                [nzShowTime]="{ nzFormat: 'HH:mm' }"
                ngModel
                name="fechaFinal"
              ></nz-date-picker>
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>

        <nz-form-item class="marginElement">
          <nz-form-label [nzSpan]="3">Destino</nz-form-label>
        
          <nz-form-control [nzSpan]="17">
            <nz-input-group style="width: 100%">
              <input nz-input placeholder="Direccion" ngModel name="destino" type="text" />
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>


        <nz-form-item class="marginElement">
          <nz-form-label [nzSpan]="3">Cant. módulos</nz-form-label>
                  <nz-form-control [nzSpan]="17">
            <nz-input-group style="width: 100%">
              <input nz-input placeholder="" ngModel name="cant_modulos" type="number" />
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>

        <nz-form-item class="marginElement">
          <nz-form-label [nzSpan]="3">Importe módulo</nz-form-label>
                  <nz-form-control [nzSpan]="17">
            <nz-input-group style="width: 100%">
              <input nz-input placeholder="" ngModel name="importe_modulos" type="number" />
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>

        <nz-form-item class="marginElement">
          <nz-form-label [nzSpan]="3">Cant. Horas excedentes</nz-form-label>
          <nz-form-control [nzSpan]="17">
            <nz-input-group style="width: 100%">
              <input nz-input placeholder="Kilometros" ngModel name="cant_horas_exced" type="number" />
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>

        <nz-form-item class="marginElement">
          <nz-form-label [nzSpan]="3">Importe hora excedente</nz-form-label>
          <nz-form-control [nzSpan]="17">
            <nz-input-group style="width: 100%">
              <input nz-input placeholder="Kilometros" ngModel name="impo_horas_exced" type="number" />
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>

        <nz-form-item class="marginElement">
          <nz-form-label [nzSpan]="3">Cant. Km excedentes</nz-form-label>
          <nz-form-control [nzSpan]="17">
            <nz-input-group style="width: 100%">
              <input nz-input placeholder="Kilometros" ngModel name="cant_km_exced" type="number" />
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>

        <nz-form-item class="marginElement">
          <nz-form-label [nzSpan]="3">Importe Km excedente</nz-form-label>
          <nz-form-control [nzSpan]="17">
            <nz-input-group style="width: 100%">
              <input nz-input placeholder="Kilometros" ngModel name="impo_km_exced" type="number" />
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>

        <nz-form-item class="marginElement">
          <nz-form-label [nzSpan]="3">Importe Peajes</nz-form-label>
          <nz-form-control [nzSpan]="17">
            <nz-input-group style="width: 100%">
              <input nz-input placeholder="Kilometros" ngModel name="impo_peaje" type="number" />
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>

        <nz-form-item class="marginElement">
          <nz-form-label [nzSpan]="3">Importe a Facturar Calcularlo</nz-form-label>
        
        </nz-form-item>

        @for (control of listInputPersonal; track control; let i = $index) {
          <nz-form-item class="marginElement">
            <nz-form-label  [nzSpan]="3"> Personal </nz-form-label>
            <nz-form-control [nzSpan]="8">
              <nz-input-group style="width: 100%">
                <app-personal-search ngModel name={{i+1}}personalId />
              </nz-input-group>
            </nz-form-control>
            <nz-form-label  [nzSpan]="2"> Importe </nz-form-label>
            <nz-form-control [nzSpan]="6">
              <nz-input-group style="width: 100%">
                <input nz-input placeholder="" ngModel name={{i+1}}importePersonal type="number" />
              </nz-input-group>
            </nz-form-control>
            <nz-form-control [nzSpan]="1" style="text-align: right;">
              <span nz-icon nzType="delete" nzTheme="outline" (click)="removePersonal(control, $event)"></span>
            </nz-form-control>
          </nz-form-item>
          
        }
  
        <nz-form-item>
          <nz-form-control [nzXs]="{ span: 24, offset: 0 }" [nzSm]="{ span: 20, offset: 4 }">
            <button nz-button nzType="dashed" class="add-button" (click)="addPersonal($event)">
              <span nz-icon nzType="plus"></span>
              Agregar Personal
            </button>
          </nz-form-control>
        </nz-form-item>

        @for (control of listInputVehiculo; track control; let i = $index) {
          <nz-form-item class="marginElement">
            <nz-form-label  [nzSpan]="3"> Patente </nz-form-label>
            <nz-form-control [nzSpan]="3">
              <nz-input-group style="width: 100%">
                <input nz-input placeholder="" ngModel name={{i+1}}patente type="text"/>
              </nz-input-group>
            </nz-form-control>
            <nz-form-label  [nzSpan]="2"> Dueño </nz-form-label>
            <nz-form-control [nzSpan]="6">
              <nz-input-group style="width: 100%">
                <app-personal-search ngModel name={{i+1}}duenoId />
              </nz-input-group>
            </nz-form-control>
            <nz-form-label  [nzSpan]="2"> Importe </nz-form-label>
            <nz-form-control [nzSpan]="3">
              <nz-input-group style="width: 100%">
                <input nz-input placeholder="" ngModel name={{i+1}}importeVehiculo type="number" />
              </nz-input-group>
            </nz-form-control>
            <nz-form-label  [nzSpan]="2">Peaje</nz-form-label>
            <nz-form-control [nzSpan]="3">
              <nz-input-group style="width: 100%">
                <input nz-input placeholder="" ngModel name={{i+1}}peajeVehiculo type="number" />
              </nz-input-group>
            </nz-form-control>

            <nz-form-control [nzSpan]="1" style="text-align: right;">
              <span nz-icon nzType="delete" nzTheme="outline" (click)="removeVehiculo(control, $event)"></span>
            </nz-form-control>
          </nz-form-item>
          
        }
  
        <nz-form-item>
          <nz-form-control [nzXs]="{ span: 24, offset: 0 }" [nzSm]="{ span: 20, offset: 4 }">
            <button nz-button nzType="dashed" class="add-button" (click)="addVehiculo($event)">
              <span nz-icon nzType="plus"></span>
              Agregar Vehículo
            </button>
          </nz-form-control>
        </nz-form-item>

        <nz-form-item>
          <nz-form-control style="display: flex; justify-content: center; align-items: center;">    
            <button nz-popconfirm nzType="primary" nzPopconfirmTitle="Confirmar guardar cambios?" nz-button (nzOnConfirm)="save()">
              Guardar Cambios
            </button>
          </nz-form-control>
          <nz-form-control style="display: flex; justify-content: center; align-items: center;">    
            <button nz-popconfirm nzType="primary" nzPopconfirmTitle="Confirmar accion?" nz-button *ngIf="editCustodiaId" (nzOnConfirm)="setEstado(1)">
              Finalizar
            </button>
          </nz-form-control>
          <nz-form-control style="display: flex; justify-content: center; align-items: center;">    
            <button nz-popconfirm nzType="primary" nzPopconfirmTitle="Confirmar accion?" nz-button *ngIf="editCustodiaId" (nzOnConfirm)="setEstado(2)">
              Cancelar
            </button>
          </nz-form-control>
        </nz-form-item>
    
      </form>
    </nz-tab>

  </nz-tabset>

    
  
</nz-card>