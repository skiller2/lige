
<form [formGroup]="formCli">
  <br>
  <nz-form-item class="marginElement">
    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">Cliente</nz-form-label>
    <nz-form-control [nzSm]="24" [nzMd]="20" [nzLg]="17">
      <app-cliente-search formControlName="clienteId" />
    </nz-form-control>
  </nz-form-item>

  <nz-form-item class="marginElement">
    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">Descrpcion</nz-form-label>
    <nz-form-control [nzSm]="24" [nzMd]="20" [nzLg]="8">
      <input nz-input placeholder="" formControlName="CLienteDescripcion" type="string" />
    </nz-form-control>

    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">Sucursal</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="6">
      <nz-select formControlName="SucursalId" nzPlaceHolder="Sucursal" nzAllowClear [nzDropdownMatchSelectWidth]="false" style="width: 100%" >
        <ng-container *ngFor="let option of $sucursales | async " >
          <nz-option [nzValue]="option.SucursalId" [nzLabel]="option.SucursalDescripcion" ></nz-option>
        </ng-container>
      </nz-select>
    </nz-form-control>
  </nz-form-item>

  <div class="input-container1">
    <div class="input-label">Contrato</div>
  </div>  
  
  <nz-form-item class="marginElement">
    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">Contrato Desde</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="6">
      <nz-date-picker
      [nzShowTime]="{ nzFormat: 'HH:mm' }"
      nzFormat="yyyy-MM-dd HH:mm"
      formControlName="ContratoDesde"
      (ngModelChange)="onChangePeriodo($event)"
    ></nz-date-picker>
    </nz-form-control>
  </nz-form-item>
  <nz-form-item class="marginElement">
    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">Contrato Hasta</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="6">
      <nz-date-picker
      [nzShowTime]="{ nzFormat: 'HH:mm' }"
      nzFormat="yyyy-MM-dd HH:mm"
      formControlName="ContratoHasta"
      (ngModelChange)="onChangePeriodo($event)"
    ></nz-date-picker>
    </nz-form-control>
  </nz-form-item>

  <div class="input-container1">
    <div class="input-label">Domicilio</div>
</div>  
<nz-form-item class="marginElement">
    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">Direcci√≥n Calle</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="12">
      <input nz-input placeholder="" formControlName="ObjetivoDomicilioDomCalle" type="text" />
    </nz-form-control>

  <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="1">Nro</nz-form-label>
  <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="4">
    <input nz-input placeholder="" formControlName="ObjetivoDomicilioDomNro" type="text" />
  </nz-form-control>
</nz-form-item>

<nz-form-item class="marginElement">
    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">Complemento</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="12">
      <input nz-input placeholder="" formControlName="ObjetivoDomicilioDomLugar" type="text" />
    </nz-form-control>

    
</nz-form-item>

<nz-form-item class="marginElement">

    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">Cod Postal </nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="6">
      <input nz-input placeholder="" formControlName="ObjetivoDomicilioCodigoPostal" type="text" />
    </nz-form-control>

    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="8" [nzLg]="5">Provincia</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="6">
      <nz-select  formControlName="ObjetivoDomicilioProvinciaId" nzPlaceHolder="Provincia" nzAllowClear [nzDropdownMatchSelectWidth]="false" style="width: 100%" >
        <ng-container *ngFor="let option of $optionsProvincia | async " >
          <nz-option [nzValue]="option.ProvinciaId" [nzLabel]="option.ProvinciaDescripcion" ></nz-option>
        </ng-container>
      </nz-select>
    </nz-form-control>
</nz-form-item>

<nz-form-item class="marginElement">
    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">Localidad</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="6">
      <nz-select formControlName="ObjetivoDomicilioLocalidadId" nzPlaceHolder="Localidad" nzAllowClear [nzDropdownMatchSelectWidth]="false" style="width: 100%" >
        <ng-container *ngFor="let option of $optionsLocalidad | async " >
          <nz-option *ngIf="option.ProvinciaId == formCli.value.ObjetivoDomicilioProvinciaId"  [nzValue]="option.LocalidadId" [nzLabel]="option.localidadDescripcion" ></nz-option>
        </ng-container>
      </nz-select>
    </nz-form-control>

    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="8" [nzLg]="5">Barrio</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="6">
      <nz-select formControlName="ObjetivoDomicilioBarrioId" nzPlaceHolder="Barrio" nzAllowClear [nzDropdownMatchSelectWidth]="false" style="width: 100%" >
        <ng-container *ngFor="let option of $optionsBarrio | async " >
          <nz-option *ngIf="option.ProvinciaId == formCli.value.ObjetivoDomicilioProvinciaId && option.LocalidadId == formCli.value.ObjetivoDomicilioLocalidadId " [nzValue]="option.BarrioId" [nzLabel]="option.BarrioDescripcion" ></nz-option>
        </ng-container>
      </nz-select>
    </nz-form-control>
</nz-form-item>


<div class="input-container1">
  <div class="input-label">Coordinador  de cuenta</div>
</div>  

<div formArrayName="infoCoordinadorContacto">
  <nz-form-item class="marginElement" *ngFor="let control of infoCoordinadorContacto().controls; let i = index" [formGroupName]="i" [ngClass]="{'even-background': i % 2 === 0}">


    <nz-form-label  [nzXs]="24" [nzSm]="24" [nzMd]="2"> Persona </nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="3" [nzLg]="6">
      <nz-input-group style="width: 100%" nzSearch>
        <app-personal-search name="PersonalId"/>
      </nz-input-group>
    </nz-form-control>

    <nz-form-label  [nzXs]="24" [nzSm]="24" [nzMd]="2"> Porcentaje </nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="3" [nzLg]="4">
      <nz-input-group style="width: 100%" nzSearch>
        <input nz-input placeholder="" formControlName="Porcentaje" type="number" />
      </nz-input-group>
    </nz-form-control>

    <nz-form-label  [nzXs]="24" [nzSm]="24" [nzMd]="2" >  Descuento </nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="3" [nzLg]="6" >
      <nz-input-group style="width: 100%" [nzAddOnAfter]="controlClienteButton" nzSearch>
          <nz-select formControlName="Descuento" nzPlaceHolder="Descuento" nzAllowClear [nzDropdownMatchSelectWidth]="false" style="width: 100%" >
            <ng-container *ngFor="let option of $optionsDescuento | async " >
              <nz-option  [nzValue]="option.value" [nzLabel]="option.label" ></nz-option>
            </ng-container>
          </nz-select>
        </nz-input-group>
        <ng-template #controlClienteButton >
          <button nz-button *ngIf="infoCoordinadorContacto().controls.length == i+1" nzType="primary" class="add-button" (click)="addClienteContacto($event)">
            <span nz-icon nzType="plus"></span>
          </button>
          <button nz-button nzType="default" (click)="removeClienteContacto(i, $event)">
            <span nz-icon nzType="delete" nzTheme="outline" ></span>
          </button>
        </ng-template>
    </nz-form-control> 
  
  </nz-form-item>
</div>


<div class="input-container1">
  <div class="input-label">Documentos</div>
</div>

<nz-form-item>
<!-- 
  <nz-form-control>
    <app-file-upload [valueFile]="formCli.value.ClienteFacturacionCUIT" [(files)]="files"   [idForSearh]="ObjetivoId()"
    [textForSearch]="textForSearch" ></app-file-upload>
  </nz-form-control> -->
  
</nz-form-item>

<nz-form-item>
  <nz-form-control style="display: flex; justify-content: center; align-items: center;">    
    <button nzType="primary" nz-button  (click)="save()" [nzLoading]="isLoading()" [disabled]="formCli.pristine && files.length === 0 " >
      Guardar Cambios
    </button>
    <button nzType="primary" nz-button nzDanger  nz-popconfirm
    nzPopconfirmTitle="Esta seguro que quiere eliminar este Cliente?"
    (nzOnConfirm)="deleteCliente()"
    nzPopconfirmPlacement="top" *ngIf="edit()" [nzLoading]="isLoading()" [disabled]="!(formCli.pristine)" >
      Borrar Cliente
    </button>
  </nz-form-control>
</nz-form-item>

</form>