<form [formGroup]="formPer">
  <br>
  <nz-form-item class="marginElement">
    <nz-form-label  [nzXs]="24" [nzSm]="24" [nzMd]="3">Nombre</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="8" [nzLg]="7">
      <input nz-input placeholder="" formControlName="Nombre" type="text" />
    </nz-form-control>
        
    <nz-form-label  [nzXs]="24" [nzSm]="24" [nzMd]="3">Apellido</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="8" [nzLg]="7">
      <input nz-input placeholder="" formControlName="Apellido" type="text" />
    </nz-form-control>
  </nz-form-item>

  <nz-form-item class="marginElement">

    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3" >Email</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="8" [nzLg]="5">
      <input nz-input placeholder="" formControlName="Email" type="text" />
    </nz-form-control>

    <nz-form-label  [nzXs]="24" [nzSm]="24" [nzMd]="3" [nzLg]="2">CUIT</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="8" [nzLg]="5">
      <input nz-input placeholder="" formControlName="CUIT" type="number" />
    </nz-form-control>

    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="6" [nzLg]="3">Fecha de Nacimiento</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="5" [nzLg]="3">
      <nz-date-picker formControlName="FechaNacimiento" ></nz-date-picker>
    </nz-form-control>
    
  </nz-form-item>

  <nz-form-item class="marginElement">

    <nz-form-label  [nzXs]="24" [nzSm]="24" [nzMd]="4" [nzLg]="3">Nro de Legajo</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="7" [nzLg]="5">
      <input nz-input placeholder="" formControlName="NroLegajo" type="number" />
    </nz-form-control>

    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3" [nzLg]="2">Sucursal</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="8" [nzLg]="5">
      <nz-select formControlName="SucursalId" nzPlaceHolder="" nzAllowClear [nzDropdownMatchSelectWidth]="false" style="width: 100%" >
        <ng-container *ngFor="let option of $optionsSucursal | async" >
          <nz-option [nzValue]="option.SucursalId" [nzLabel]="option.SucursalDescripcion" ></nz-option>
        </ng-container>
      </nz-select>
    </nz-form-control>

    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="6" [nzLg]="3">Fecha de Ingreso</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="5" [nzLg]="3">
      <nz-date-picker formControlName="FechaIngreso" ></nz-date-picker>
    </nz-form-control>
  </nz-form-item>

  <nz-form-item class="marginElement">
    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">Nacionalidad</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="8" [nzLg]="7">
      <nz-select formControlName="NacionalidadId" nzPlaceHolder="" nzAllowClear [nzDropdownMatchSelectWidth]="false" style="width: 100%" >
        <ng-container *ngFor="let option of $optionsNacionalidad | async">
          <nz-option [nzValue]="option.value" [nzLabel]="option.label"></nz-option>
        </ng-container>
      </nz-select>
    </nz-form-control>
  </nz-form-item>

  <nz-form-item class="marginElement">
    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="2" [nzLg]="3">Foto</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="5">
        <app-file-upload formControlName="Foto" [idForSearh]="this.personalId()" [textForSearch]="'FOTO'"
        [columnForSearch]="'PersonalId'" [tableForSearch]="'DocumentoImagenFoto'"></app-file-upload>
    </nz-form-control>

    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3" [nzLg]="2">DNI - Frente</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="5">
      <app-file-upload formControlName="docFrente" [idForSearh]="this.personalId()" [textForSearch]="'DOCUMENFREN'"
        [columnForSearch]="'PersonalId'" [tableForSearch]="'DocumentoImagenDocumento'"></app-file-upload>
    </nz-form-control>

    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3" [nzLg]="2">DNI - Dorso</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="5">
        <app-file-upload formControlName="docDorso" [idForSearh]="this.personalId()" [textForSearch]="'DOCUMENDOR'"
        [columnForSearch]="'PersonalId'" [tableForSearch]="'DocumentoImagenDocumento'"></app-file-upload>
    </nz-form-control>
  </nz-form-item>

  <!-- <nz-divider nzText="Domicilio" nzOrientation="left"></nz-divider> -->
  <div class="input-container1">
    <div class="input-label">Domicilio</div>
  </div>

  <nz-form-item class="marginElement">
    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">Calle</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="11">
      <input nz-input placeholder="" formControlName="Calle" type="text"/>
    </nz-form-control>
    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="2">Nro</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="6" [nzLg]="4">
      <input nz-input placeholder="" formControlName="Nro" type="text"/>
    </nz-form-control>
  </nz-form-item>

  <nz-form-item class="marginElement">
    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">Departamento</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="6" [nzLg]="5">
        <input nz-input placeholder="" formControlName="Dpto" type="text"/>
    </nz-form-control>
    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="2" [nzLg]="2">Piso</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="3">
        <input nz-input placeholder="" formControlName="Piso" type="text"/>
    </nz-form-control>
    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="4" [nzLg]="3">Cod.Postal</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="4">
        <input nz-input placeholder="" formControlName="CodigoPostal" type="text"/>
    </nz-form-control>
  </nz-form-item>

  <nz-form-item class="marginElement">
    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">Pais</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="8" [nzLg]="6">
      <nz-select formControlName="PaisId" nzPlaceHolder="" nzAllowClear
      [nzDropdownMatchSelectWidth]="false" style="width: 100%"
      (ngModelChange)="selectedPaisChange($event)">
        <ng-container *ngFor="let option of $optionsPais | async">
          <nz-option [nzValue]="option.value" [nzLabel]="option.label"></nz-option>
        </ng-container>
      </nz-select>
    </nz-form-control>
    
    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">Provincia</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="8" [nzLg]="6">
      <nz-select formControlName="ProvinciaId" nzPlaceHolder="" nzAllowClear
      [nzDropdownMatchSelectWidth]="false" style="width: 100%"
      (ngModelChange)="selectedProvinciaChange($event)" >
        <ng-container *ngFor="let option of $optionsProvincia | async">
          <nz-option [nzValue]="option.value" [nzLabel]="option.label"></nz-option>
        </ng-container>
      </nz-select>
    </nz-form-control>
  </nz-form-item>

  <nz-form-item class="marginElement">
    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">Localidad</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="8" [nzLg]="6">
      <nz-select formControlName="LocalidadId" nzPlaceHolder="" nzAllowClear
      [nzDropdownMatchSelectWidth]="false" style="width: 100%"
      (ngModelChange)="selectedLocalidadChange($event)" >
        <ng-container *ngFor="let option of $optionsLocalidad | async">
          <nz-option [nzValue]="option.value" [nzLabel]="option.label"></nz-option>
        </ng-container>
      </nz-select>
    </nz-form-control>
      
    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">Barrio</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="8" [nzLg]="6">
      <nz-select formControlName="BarrioId" nzPlaceHolder="" nzAllowClear
      [nzDropdownMatchSelectWidth]="false" style="width: 100%">
        <ng-container *ngFor="let option of $optionsBarrio | async">
          <nz-option [nzValue]="option.value" [nzLabel]="option.label"></nz-option>
        </ng-container>
      </nz-select>
    </nz-form-control>
  </nz-form-item>
  
  <!-- <nz-divider nzText="Telefono" nzOrientation="left"></nz-divider> -->
  <div class="input-container1">
    <div class="input-label">Telefono</div>
  </div>

  <div formArrayName="telefonos">
    <nz-form-item class="marginElement" *ngFor="let control of telefonos().controls; let i = index" [formGroupName]="i">
        
      <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">Tipo</nz-form-label>
      <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="8" [nzLg]="5">
        <nz-select formControlName="TipoTelefonoId" nzPlaceHolder="" nzAllowClear
        [nzDropdownMatchSelectWidth]="false" style="width: 100%" >
          <ng-container *ngFor="let option of $optionsTelefonoTipo | async">
            <nz-option [nzValue]="option.value" [nzLabel]="option.label"></nz-option>
          </ng-container>
        </nz-select>
      </nz-form-control>

      <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="4">Numero Telefono</nz-form-label>
      <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="8">
        <nz-input-group style="width: 100%" [nzAddOnAfter]="controlTelefonoButton" nzSearch>
          <input nz-input placeholder="" formControlName="TelefonoNro" type="text"/>
        </nz-input-group>
        <ng-template #controlTelefonoButton >
          <button nz-button *ngIf="telefonos().controls.length == i+1 && formPer.enabled" nzType="primary" class="add-button" (click)="addTelefono($event)" nz-tooltip nzTooltipTitle="{{ 'app.icon.add' | i18n }}">
            <span nz-icon nzType="plus"></span>
          </button>
          <button nz-button nzType="default" *ngIf="formPer.enabled" (click)="removeTelefono(i, $event)" nz-tooltip nzTooltipTitle="{{ 'app.icon.borrar' | i18n }}">
            <span nz-icon nzType="delete" nzTheme="outline" ></span>
          </button>
        </ng-template>
      </nz-form-control>

    </nz-form-item>
  </div>

  <!-- <nz-divider nzText="Estudios" nzOrientation="left"></nz-divider> -->
  <div class="input-container1">
    <div class="input-label">Estudios</div>
  </div>

  <div formArrayName="estudios">
    <div *ngFor="let control of estudios().controls; let i = index" [formGroupName]="i">
      <nz-form-item class="marginElement">
        <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">Tipo</nz-form-label>
        <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="5" [nzLg]="5">
          <nz-select formControlName="TipoEstudioId" nzPlaceHolder="" nzAllowClear
          [nzDropdownMatchSelectWidth]="false" style="width: 100%" >
            <ng-container *ngFor="let option of $optionsEstudioTipo | async">
              <nz-option [nzValue]="option.value" [nzLabel]="option.label"></nz-option>
            </ng-container>
          </nz-select>
        </nz-form-control>
        
        <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3" [nzLg]="2">Estado</nz-form-label>
        <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="5" [nzLg]="5">
          <nz-select formControlName="EstadoEstudioId" nzPlaceHolder="" nzAllowClear
          [nzDropdownMatchSelectWidth]="false" style="width: 100%" >
            <ng-container *ngFor="let option of $optionsEstudioEstado | async">
              <nz-option [nzValue]="option.value" [nzLabel]="option.label"></nz-option>
            </ng-container>
          </nz-select>
        </nz-form-control>

        <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3" [nzLg]="2">Año</nz-form-label>
        <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="4" [nzLg]="3">
          <input nz-input placeholder="" formControlName="EstudioAno" type="number"/>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item class="marginElement">
        <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">Titulo</nz-form-label>
        <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="10" [nzLg]="8">
          <nz-input-group style="width: 100%" [nzAddOnAfter]="controlEstudioButton" nzSearch>
            <input nz-input placeholder="" formControlName="EstudioTitulo" type="text"/>
          </nz-input-group>
          <ng-template #controlEstudioButton >
            <button nz-button *ngIf="estudios().controls.length == i+1 && formPer.enabled" nzType="primary" class="add-button" (click)="addEstudio($event)" nz-tooltip nzTooltipTitle="{{ 'app.icon.add' | i18n }}">
              <span nz-icon nzType="plus"></span>
            </button>
            <button nz-button nzType="default" *ngIf="formPer.enabled" (click)="removeEstudio(i, $event)" nz-tooltip nzTooltipTitle="{{ 'app.icon.borrar' | i18n }}">
              <span nz-icon nzType="delete" nzTheme="outline" ></span>
            </button>
          </ng-template>
        </nz-form-control>

        <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="2" [nzLg]="3">Doc</nz-form-label>
        <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="5">
            <app-file-upload formControlName="DocTitulo" [idForSearh]="this.personalId()" [textForSearch]="'CERESTPAG'+i"
            [columnForSearch]="'PersonalId'" [tableForSearch]="'DocumentoImagenEstudio'"></app-file-upload>
        </nz-form-control>
      </nz-form-item>

      <!-- <nz-form-item class="marginElement">
        <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="2" [nzLg]="3">Doc</nz-form-label>
        <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="5">
            <app-file-upload formControlName="DocTitulo" [idForSearh]="this.personalId()" [textForSearch]="'CERESTPAG'+i"
            [keyField]="'PersonalId'" [tableForSearch]="'DocumentoImagenEstudio'" [dataBaseForSearch]="'Produccion'"></app-file-upload>
        </nz-form-control>
      </nz-form-item> -->

    </div>
  </div>

  <ng-container>
  <!-- <nz-divider nzText="Situacion de Revista" nzOrientation="left"></nz-divider> -->
  <div class="input-container1">
    <div class="input-label">Situacion de Revista</div>
  </div>

  <nz-form-item class="marginElement">
    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">Situacion de Revista</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="5">
      <nz-select formControlName="SituacionId" nzPlaceHolder="Situacion de Revista" nzAllowClear
        [nzDropdownMatchSelectWidth]="false" [nzDisabled]="personalId()? true : false">
        <ng-container *ngFor="let option of $optionsSitRevista | async">
          <nz-option [nzValue]="option.value" [nzLabel]="option.label"></nz-option>
        </ng-container>
      </nz-select>
    </nz-form-control>

    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">Motivo</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="9" >
      <input nz-input placeholder="" formControlName="Motivo" type="text" [readOnly]="personalId()? true : false"/>
    </nz-form-control>
  </nz-form-item>
</ng-container>

  <!-- <div class="input-container1">
    <div class="input-label">Documento AFIP</div>
  </div>

  <nz-form-item class="marginElement">
    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3" >Periodo</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="5" [nzLg]="3">
      <nz-date-picker formControlName="Periodo" nzMode="month"></nz-date-picker>
    </nz-form-control>
    <nz-form-label [nzXs]="24" [nzSm]="24" [nzMd]="3">Formulario 184</nz-form-label>
    <nz-form-control [nzXs]="24" [nzSm]="24" [nzMd]="5">
      <app-file-upload formControlName="AFIP" [idForSearh]="this.personalId()" [textForSearch]="'F184'"
      [columnForSearch]="'PersonalId'" [tableForSearch]="'DocumentoImagenImpuestoAFIP'"></app-file-upload>
  </nz-form-control>
  </nz-form-item> -->

  <nz-form-item>
    <nz-form-control style="display: flex; justify-content: center; align-items: center;">    
      <button nzType="primary" nz-button *ngIf="formPer.enabled"  (click)="save()" [nzLoading]="isLoading()" [disabled]="formPer.pristine" >
        {{ 'app.btn.save' | i18n }}
      </button>
    </nz-form-control>
  </nz-form-item>


</form>