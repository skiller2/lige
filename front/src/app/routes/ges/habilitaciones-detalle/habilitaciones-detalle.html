<nz-card class="small-margin">
  <div class="fila">
    <div class="izquierda"></div>
    <nz-button-group nz-button nzButtonGroup class="derecha">
      <button nz-button nzType="default" [disabled]="(!personalId() && !personalHabilitacionId() && !lugarHabilitacionId())"
      (click)="openDrawerforForm()" nz-tooltip nzTooltipTitle="{{ 'app.icon.add' | i18n }}">
        <span nz-icon nzType="plus" nzTheme="outline"></span>
      </button>
      <button nz-button nzType="default" [disabled]="!codigo()"
      (click)="openDrawerforFormEdit()" nz-tooltip nzTooltipTitle="{{ 'app.icon.edit' | i18n }}">
        <span nz-icon nzType="edit" nzTheme="outline"></span>
      </button>
    </nz-button-group>
  </div>
  <div class="grillas-wrapper">

    @if(columnsDetalle$ | async; as columnasDet) {
      <div class="gridDetalleContainer">
        <angular-slickgrid 
          gridId="gridDetalle" 
          [columns]="columnasDet"
          [options]="gridDetalleOptions" 
          [dataset]="(gridDetalleData$ | async) || []"
          (onAngularGridCreated)="angularGridDetalleReady($event)"
          (onSelectedRowsChanged)="handleSelectedRowsChanged($event)">
        </angular-slickgrid>
      </div>
    }

    @if(columnsDoc$ | async; as columnasDoc) {
      <div class="gridDocContainer">
        <angular-slickgrid 
          gridId="gridDoc" 
          [columns]="columnasDoc"
          [options]="gridDocOptions" 
          [dataset]="(gridDocData$ | async) || []"
          (onAngularGridCreated)="angularGridDocReady($event)">
        </angular-slickgrid>
      </div>
    }

  </div>
</nz-card>

<app-habilitaciones-detalle-form-drawer [(visible)]="visibleForm" (onAddorUpdate)="refreshGrid($event)" [tituloDrawer]="'Nueva Habilitación Detalle'"
[personalId]="personalId()" [lugarHabilitacionId]="lugarHabilitacionId()" [personalHabilitacionId]="personalHabilitacionId()"></app-habilitaciones-detalle-form-drawer>

<app-habilitaciones-detalle-form-drawer [(visible)]="visibleFormEdit" (onAddorUpdate)="refreshGrid($event)" [tituloDrawer]="'Editar Habilitación Detalle'" [codigo]="codigo()"
[personalId]="personalId()" [lugarHabilitacionId]="lugarHabilitacionId()" [personalHabilitacionId]="personalHabilitacionId()"></app-habilitaciones-detalle-form-drawer>